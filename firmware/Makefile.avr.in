AVRDUDE = avrdude -v -P usb -p $(MCU) $(N)

include asf-3.50.0/common/utils/make/Makefile.avr.in

.PHONY: upload-flip2
upload-flip2: $(project).hex
	$(AVRDUDE) -c flip2 -D -U application:w:$<:i

.PHONY: upload-ice
upload-ice: $(project).hex
	$(AVRDUDE) -c atmelice_pdi -D -U application:w:$<:i

.PHONY: upload-mk2
upload-mk2: $(project).hex
	$(AVRDUDE) -c avrispmkII -U application:w:$<:i

.PHONY: upload-dfu
upload-dfu: bin/dfu-$(MCU)-$(BOARD).ihex
	$(AVRDUDE) -c avrispmkII \
    -U flash:w:$<:i \
    -U fuse2:w:0xbf:m

.PHONY: upload-hw
upload-hw: bin/hw-$(BOARD).ihex
	$(AVRDUDE) -c avrispmkII -U eeprom:w:$<:i

.PHONY: upload
upload: bin/dfu-$(MCU)-$(BOARD).ihex bin/hw-$(BOARD).ihex $(project).hex
	$(AVRDUDE) -c avrispmkII \
    -U flash:w:bin/dfu-$(MCU)-$(BOARD).ihex:i \
    -U fuse2:w:0xbf:m \
    -U eeprom:w:bin/hw-$(BOARD).ihex:i \
    -U application:w:$(project).hex:i
